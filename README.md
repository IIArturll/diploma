# Мультиформатная система планирования задач с поддержкой многопользовательского режма на Java

Этот проект представляет собой микросеривисную архитектуру, построенную с использованием Java и Spring Boot. Он включает несколько микросервисов, которые могут взаимодействовать друг с другом с помощью Eureka для регистрации и обнаружения сервисов.

## Структура проекта

Проект состоит из следующих модулей:

- **"common-classes"**: Общие классы и библиотеки, используемые всеми сервисами.
- **"api-gateway"**: API Gateway для маршрутизации запросов между сервисами.
- **"eureka-server"**: Сервер Eureka для регистрации и обнаружения сервисов.
- **"user-service"**: Сервис для управления пользователями.
- **"board-service"**: Сервис для работы с досками и проектами.
- **"email-service"**: Сервис для отправки email-уведомлений.

## Шаги по запуску проекта локально

### Требования

Перед запуском убедитесь, что на вашей машине установлены следующие компоненты:

- Java 17 или выше
- Maven 3.x или выше
- PostgreSQL (для работы с базой данных)

### 1. Клонировать репозиторий

Сначала клонируйте репозиторий на вашу локальную машину:

```
git clone git@github.com:IIArturll/diploma.git
cd diploma
```

### 2. Настройка базы данных

Перед запуском убедитесь, что у вас настроена база данных PostgreSQL. Например, можно создать базу данных "your_db":

```
CREATE DATABASE your_db;
```

Также не забудьте указать правильные данные в конфигурации каждого из сервисов.

### 3. Конфигурация для сервисов

#### Конфигурация JWT для "board-service" и "user-service"

В файле "application.yml" для этих сервисов необходимо добавить следующую конфигурацию для JWT:

```
jwt:
  access:
    secret: ваш секретный ключ
    expirationSeconds: время жизни токена в секундах
```

#### Конфигурация для "email-service" (SMTP для отправки email)

В файле "application.yml" для "email-service" добавьте настройки для отправки email через SMTP:

```
mail:
  host: smtp.gmail.com
  username: ваша gmail почта
  password: пароль для приложения Gmail
  port: 587
  properties:
    mail:
      smtp:
        auth: true
        starttls:
          enable: true
    smtps:
      trust: smtp.gmail.com
```

#### Получение пароля для приложения Gmail

Для использования Gmail в приложении, если у вас включена двухфакторная аутентификация (2FA), нужно создать пароль для приложения. Вот как это сделать:

1. **Войдите в свою учетную запись Google:**

   - Перейдите по ссылке: [https://myaccount.google.com/](https://myaccount.google.com/).
   - Введите свои учетные данные и войдите в систему.

2. **Перейдите в раздел "Безопасность":**

   - В левом меню выберите "Безопасность".

3. **Включите двухфакторную аутентификацию (если еще не включена):**

   - Найдите раздел "Подтверждение в два этапа" и нажмите "Настроить".
   - Следуйте инструкциям для активации 2FA.

4. **Перейдите в раздел "Пароли приложений":**

   - В разделе "Вход в Google" выберите "Пароли приложений".
   - Если потребуется, снова подтвердите свою личность.

5. **Создайте новый пароль для приложения:**

   - В меню "Выберите приложение" выберите приложение, для которого вам нужно создать пароль (например, "Другие" и введите название приложения).
   - Нажмите "Создать".

6. **Скопируйте пароль для приложения:**

   - На экране появится сгенерированный пароль.
   - Скопируйте его, так как он будет отображаться только один раз.

7. **Используйте этот пароль в приложении:**
   - Введите скопированный пароль вместо обычного пароля для вашей учетной записи Google в соответствующем поле приложения.

### 4. Собрать проект common-classes

После настройки конфигурации соберите проект common-classes с помощью Maven:

```
mvn clean install -f ./backend/common-classes/ -DskipTests=true
```

### 5. Запуск сервисов

Теперь вы можете запустить каждый сервис отдельно. Например, для запуска "user-service" выполните команду:

```
cd backend
mvn spring-boot:run -f ./user-service
```

Аналогично для других сервисов. Убедитесь, что "eureka-server" и "api-gateway" запущены первыми, чтобы остальные сервисы могли обнаруживать друг друга.

### 6. Импорт коллекции Postman

Если вам нужно протестировать API, вы можете использовать коллекцию Postman. Файл коллекции доступен в репозитории:

- Путь: "postman_collection.json"

[Скачать коллекцию Postman](postman_collection.json)

Импортируйте этот файл в Postman, чтобы начать тестировать взаимодействие с API.

1. Откройте Postman.
2. Перейдите в раздел "File" → "Import".
3. Выберите файл "postman_collection.json".

Это позволит вам отправлять запросы и проверять работу API сервисов.

## Docker

В будущем
